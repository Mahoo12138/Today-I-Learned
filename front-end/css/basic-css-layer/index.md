---
title: Layer çº§è”å±‚
---
## å‰è¨€

åœ¨æ—¥å¸¸å‰ç«¯å¼€å‘ä¸­ï¼Œæˆ‘ä»¬çš„é¡µé¢å¾€å¾€ä¼šæ¶‰åŠåˆ°**å¤šæ¥æºæ ·å¼çš„æ··ç”¨**ï¼ŒåŒ…æ‹¬ï¼š

+ å¤šä¸ªç»„ä»¶åº“ã€UI æ¡†æ¶æ‰€æä¾›çš„é»˜è®¤æ ·å¼ï¼›

+ é¡¹ç›®ä¸­æ ¹æ®å®é™…åœºæ™¯å®šä¹‰çš„ä¸šåŠ¡æ ·å¼ï¼›

éšç€é¡¹ç›®ç»“æ„å¤æ‚åº¦çš„å¢åŠ ï¼Œ**æ ·å¼çš„ä¼˜å…ˆçº§å…³ç³»å¼€å§‹å˜å¾—éš¾ä»¥ç†æ¸…**ï¼Œæ ·å¼å†²çªå’Œè¦†ç›–é—®é¢˜é¢‘ç¹å‘ç”Ÿã€‚

å½“æˆ‘ä»¬è¯•å›¾**è¦†ç›–éè‡ªèº«ç¼–å†™çš„æ ·å¼**æ—¶ï¼Œå¸¸å¸¸ä¸å¾—ä¸å€ŸåŠ©æ›´å…·ä½“çš„é€‰æ‹©å™¨ï¼Œæˆ–è€…å †å æ›´é«˜çš„æƒé‡â€”â€”è¿™æ— ç–‘åŠ é‡äº†æ ·å¼ç»´æŠ¤çš„è´Ÿæ‹…ã€‚è€Œæ›´ç³Ÿç³•çš„æ˜¯ï¼Œåœ¨ä¼˜å…ˆçº§å®åœ¨æ— æ³•å‹åˆ¶ç›®æ ‡æ ·å¼æ—¶ï¼Œè®¸å¤šå¼€å‘è€…ä¼šç›´æ¥ä½¿ç”¨ `!important` æ¥â€œå¼ºè¡Œè¦†ç›–â€ï¼Œä»è€Œå¼•å‘**ä¸€è¿ä¸²ä¼˜å…ˆçº§æ–—äº‰çš„è¿é”ååº”**ã€‚

æœ€ç»ˆç»“æœæ˜¯ï¼šæ ·å¼ä½“ç³»å˜å¾—è¶Šæ¥è¶Šæ··ä¹±ã€éš¾ä»¥ç»´æŠ¤ï¼Œç»´æŠ¤äººå‘˜æˆ˜æˆ˜å…¢å…¢ï¼Œæ¯æ¬¡æ”¹æ ·å¼éƒ½åƒâ€œæ‹†ç‚¸å¼¹â€ã€‚

ä¸ºäº†è§£å†³è¿™ä¸€ç—›ç‚¹ï¼Œè®© CSS æ ·å¼å…·å¤‡æ›´å¯æ§ã€ç»“æ„åŒ–çš„ä¼˜å…ˆçº§ç®¡ç†æ–¹å¼ï¼Œ**CSS `@layer`ï¼ˆçº§è”å±‚ Cascade Layersï¼‰åº”è¿è€Œç”Ÿ**ã€‚å®ƒä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå…¨æ–°çš„æ ·å¼ç»„ç»‡ç»´åº¦ï¼Œä»æ ¹æœ¬ä¸Šç¼“è§£äº†æ ·å¼ä¼˜å…ˆçº§æ··ä¹±çš„é—®é¢˜ï¼Œä¹Ÿè®©æ ·å¼æ¶æ„æ›´æ˜“è§„åˆ’ã€æ›´å¯é¢„æœŸã€‚

## ä»€ä¹ˆæ˜¯çº§è”å±‚

çº§è”å±‚åœ¨ [CSS Cascading and Inheritance Level 5](https://www.w3.org/TR/css-cascade-5/#layering) ä¸­è¢«å®šä¹‰ï¼Œå¦‚ä¸‹ï¼š

> In the same way that [cascade origins](https://www.w3.org/TR/css-cascade-5/#origin) provide a balance of power between user and author styles, cascade layers provide a structured way to organize and balance concerns within a single origin. Rules within a single [cascade layer](https://www.w3.org/TR/css-cascade-5/#cascade-layers) cascade together, without interleaving with style rules outside the layer.
>
> Authors can create layers to represent element defaults, third-party libraries, themes, components, overrides, and other styling concernsâ€”and are able to re-order the cascade of layers in an explicit way, without altering selectors or specificity within each layer, or relying on source-order to resolve conflicts across layers.

å°±åƒ[å±‚å æ¥æº](https://www.w3.org/TR/css-cascade-5/#origin)åœ¨ç”¨æˆ·æ ·å¼å’Œå¼€å‘è€…æ ·å¼ä¹‹é—´æä¾›äº†ä¸€ç§æƒåŠ›å¹³è¡¡ä¸€æ ·ï¼Œçº§è”å±‚æä¾›äº†ä¸€ç§ç»“æ„åŒ–çš„æ–¹å¼ï¼Œç”¨äºåœ¨å•ä¸ªæ¥æºå†…ç»„ç»‡å’Œå¹³è¡¡å„ç§æ ·å¼è€ƒé‡ã€‚å•ä¸ªçº§è”å±‚å†…çš„è§„åˆ™çº§è”åœ¨ä¸€èµ·ï¼Œä¸ä¸è¯¥å±‚ä¹‹å¤–çš„æ ·å¼è§„åˆ™äº¤ç»‡ã€‚

å¼€å‘è€…å¯ä»¥åˆ›å»ºå±‚æ¥è¡¨ç¤ºå…ƒç´ é»˜è®¤å€¼ã€ç¬¬ä¸‰æ–¹åº“ã€ä¸»é¢˜ã€ç»„ä»¶ã€è¦†ç›–æ ·å¼ä»¥åŠå…¶ä»–æ ·å¼è€ƒé‡ï¼Œå¹¶ä¸”èƒ½å¤Ÿä»¥ä¸€ç§æ˜ç¡®çš„æ–¹å¼é‡æ–°æ’åˆ—å±‚å å±‚çš„é¡ºåºï¼Œè€Œæ— éœ€æ›´æ”¹æ¯ä¸ªå±‚å†…çš„é€‰æ‹©å™¨æˆ–ç‰¹å¼‚æ€§ï¼Œä¹Ÿæ— éœ€ä¾èµ–æºé¡ºåºæ¥è§£å†³å±‚ä¸å±‚ä¹‹é—´çš„å†²çªã€‚

ç®€å•æ¥è¯´ï¼Œä½ å¯ä»¥æŠŠ `@layer` æƒ³è±¡æˆ CSS çš„â€œå›¾å±‚ç³»ç»Ÿâ€ï¼Œå°±åƒåœ¨ Photoshop æˆ– Figma é‡Œä¸€æ ·ï¼š

- æ¯ä¸ª `@layer` æ˜¯ä¸€ä¸ª**å›¾å±‚**
- å±‚çº§é¡ºåºå†³å®šäº†**è°è¦†ç›–è°**
- **å…ˆå®šä¹‰çš„å›¾å±‚ä¼˜å…ˆçº§ä½ï¼Œåå®šä¹‰çš„å›¾å±‚ä¼˜å…ˆçº§é«˜**
- åŒä¸€å±‚å†…éƒ¨å†æ ¹æ®å¸¸è§„è§„åˆ™ï¼ˆé€‰æ‹©å™¨æƒé‡ã€é¡ºåºã€`!important`ï¼‰æ¥å†³å®šæ ·å¼ç”Ÿæ•ˆ

## ä½¿ç”¨çº§è”å±‚

è¯­æ³•ä¹Ÿéå¸¸ç®€å•ï¼Œçœ‹è¿™æ ·ä¸€ä¸ªä¾‹å­ï¼š

```css
@layer utilities {
  /* åˆ›å»ºä¸€ä¸ªåä¸º utilities çš„çº§è”å±‚ */
}
```

è¿™æ ·ï¼Œæˆ‘ä»¬å°±åˆ›å»ºä¸€ä¸ªåä¸º utilities çš„ `@layer`çº§è”å±‚ã€‚

### ä¸‰ç§å®šä¹‰ä¸å¼•å…¥æ–¹å¼

#### **1. å†…è”å£°æ˜æ ·å¼**

è¿™æ˜¯æœ€ç›´è§‚çš„æ–¹å¼ï¼Œç›´æ¥ç”¨ `@layer` åˆ›å»ºä¸€ä¸ªå‘½åå›¾å±‚ï¼Œå¹¶ä¹¦å†™å¯¹åº”çš„æ ·å¼ï¼š

```css
@layer base {
  h1, h2, h3 {
    font-weight: bold;
  }
}
```

#### **2. å¯¼å…¥æ—¶æŒ‡å®šå±‚ï¼ˆé…åˆ `@import`ï¼‰**

ä½ å¯ä»¥åœ¨ `@import` æ—¶å°†æŸä¸ªå¤–éƒ¨æ ·å¼æ–‡ä»¶æŒ‡å®šä¸ºæŸä¸ª `@layer`ï¼Œéå¸¸é€‚ç”¨äºå¼•å…¥ç»„ä»¶åº“æ ·å¼æ—¶ç»Ÿä¸€åˆ†ç»„ç®¡ç†ã€‚

```css
@import url("reset.css") layer(reset);
@import url("library.css") layer(components);
@import url("theme.css") layer(themes);
```

è¿™æ ·å³ä½¿ä½ æ²¡æœ‰æ‰‹åŠ¨å†™ `@layer` åŒ…è£¹è¿™äº›æ–‡ä»¶ï¼Œå®ƒä»¬ä¹Ÿä¼šè¢«è‡ªåŠ¨å½’åˆ°æŒ‡å®šå±‚ä¸­ã€‚

#### **3. æ— æ ·å¼ä½“çš„å£°æ˜ï¼šæ§åˆ¶å±‚çº§é¡ºåº**

è¿™ç§æ–¹å¼å¯ä»¥å»¶åè¡¥å……å…¶ä¸­çš„æ ·å¼è§„åˆ™ï¼Œå¹¶å‘Šè¯‰æµè§ˆå™¨æœ‰å“ªäº›å±‚ï¼Œä»¥åŠå®ƒä»¬çš„ä¼˜å…ˆçº§é¡ºåºï¼Œè¶Šé åçš„å±‚ä¼˜å…ˆçº§è¶Šé«˜ã€‚

```css
@layer reset, base, components, overrides;
// ...
@layer reset {

}
```

### åŒ¿åå±‚ä¸åµŒå¥—å±‚

#### **åŒ¿åå±‚**

å¦‚æœä½ åœ¨æ ·å¼ä¸­ä½¿ç”¨ `@layer`ï¼Œä½†**æ²¡æœ‰å‘½å**ï¼Œåˆ™è¯¥æ ·å¼ä¼šè¢«åˆ†é…åˆ°ä¸€ä¸ªåŒ¿åå±‚ä¸­ã€‚

```css
@layer {
  p {
    color: gray;
  }
}
```

åŒ¿åå±‚çš„**åˆ›å»ºåæ— æ³•å‘å…¶å†æ·»åŠ è§„åˆ™**ï¼Œæ›´é€‚åˆæ”¾ç½®â€œé€šç”¨æ ·å¼â€æˆ–â€œéå…³é”®æ ·å¼â€ã€‚ç”±äºåŒ¿åå±‚æ²¡æœ‰åç§°ï¼Œæ‰€ä»¥æ²¡åŠæ³•åƒ `@layer a, b, c;` æ˜¾å¼æ’åºå±‚ï¼ŒæŒ‰åŸæœ‰çš„å£°æ˜æ¬¡åºæ’åˆ—ä¼˜å…ˆçº§ï¼Œä¸”å…¶ä¼˜å…ˆçº§å§‹ç»ˆæ˜¯ä½äºé‡æ’åºçš„å‘½åå±‚çš„ã€‚

#### **åµŒå¥—å±‚**

`@layer` å¯ä»¥åµŒå¥—ä½¿ç”¨ï¼Œå°±åƒæ¨¡å—é‡Œçš„æ¨¡å—ï¼Œå¯ä»¥è¿›ä¸€æ­¥ç»†åˆ†ç»“æ„ï¼š

```css
@layer components {
  @layer buttons {
    .btn {
      padding: 1rem;
    }
  }

  @layer cards {
    .card {
      box-shadow: 0 0 10px #ccc;
    }
  }
}
```

### å¤šå±‚åµŒå¥—å±‚çš„ä¼˜å…ˆçº§è§„åˆ™

çº§è”å±‚çš„ä¼˜å…ˆçº§ç”±ä»¥ä¸‹å› ç´ ç»„æˆï¼ˆä»é«˜åˆ°ä½ï¼‰ï¼š

1. **å¤–å±‚å£°æ˜é¡ºåºï¼ˆæœ€å…³é”®ï¼‰**ï¼šå…ˆå£°æ˜çš„å±‚ä¼˜å…ˆçº§ä½ï¼Œåå£°æ˜çš„å±‚ä¼˜å…ˆçº§é«˜ã€‚
2. **åµŒå¥—å±‚æŒ‰å‡ºç°é¡ºåºè®¡ç®—ä¼˜å…ˆçº§**ï¼šåµŒå¥—ç»“æ„ä¸­ï¼Œå­å±‚ä¹Ÿå‚ä¸æ’åºï¼Œä½†å…¶ä¼˜å…ˆçº§è¢«é™å®šåœ¨çˆ¶å±‚å†…ã€‚
3. **é€‰æ‹©å™¨æƒé‡**ï¼šä»…åœ¨åŒä¸€å±‚å†…éƒ¨èµ·ä½œç”¨ã€‚
4. **æ ·å¼ä½ç½®é¡ºåº**ï¼šåœ¨åŒä¸€å±‚ & ç›¸åŒæƒé‡ä¸‹ç”Ÿæ•ˆã€‚
5. **`!important`**ï¼šä¾ç„¶æ˜¯æœ€ç»ˆâ€œç»ˆææ­¦å™¨â€ï¼Œèƒ½è¦†ç›–é `!important` çš„ä»»ä½•æ ·å¼ã€‚

ä¾‹å¦‚ï¼Œè¿™æ ·çš„æƒ…å†µï¼š

```CSS
div {
    width: 200px;
    height: 200px;
}
@layer A {
    div {
        background: blue;
    }
    @layer B {
        div {
            background: red;
        }
    }
}
@layer C {
    div {
        background: yellow;
    }
    @layer D {
        div {
            background: green;
        }
    }
}
```

ä¼˜å…ˆçº§çš„æ’åºæ˜¯ï¼š`@layer C > @layer C.D > @layer A > @layer A.B`ï¼Œæ‰€ä»¥æœ€ç»ˆ div çš„é¢œè‰²æ˜¯ğŸŸ¡çš„ã€‚

å¤§æ€å™¨ **`!important`** å‡Œé©¾äºæ‰€ä»¥é **`!important`**è§„åˆ™ä¹‹ä¸Šï¼Œä¾‹å¦‚æˆ‘ä»¬å¯ä»¥ç»™ `@layer A.B` æ¥ä¸ªâ€œé€†å¤©æ”¹å‘½â€ï¼Œdiv ç›´æ¥å˜æˆğŸ”´ï¼š

```css
@layer B {
    div {
        background: red!important;
    }
}
```

è¿˜æœ‰æ›´æœ‰æ„æ€çš„äº‹æƒ…ï¼Œå¦‚æœçº§è”å±‚å†…æœ‰å¤šä¸ª `!important` å†…ï¼Œå¦‚ï¼š

```css
@layer A {
    div {
        background: blue!important;
    }
    @layer B {
        div {
            background: red!important;
        }
    }
}
@layer C {
    div {
        background: yellow!important;
    }
    @layer D {
        div {
            background: green!important;
        }
    }
}
```

å®é™…è¯æ˜ï¼Œdiv æ˜¯çº¢è‰²ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ç‰¹æ€§ï¼š

1. åœ¨æ¯”è¾ƒæ­£å¸¸ï¼ˆé `!important`ï¼‰è§„åˆ™æ—¶ï¼Œè¶Šæ˜¯çº§è”é åçš„ï¼ˆæ’åºè¾ƒåçš„ `@layer`ï¼Œä¼˜å…ˆçº§è¶Šä½çš„è§„åˆ™ï¼‰ï¼Œä¼˜å…ˆçº§è¶Šä½ï¼›
2. åä¹‹ï¼Œåœ¨æ¯”è¾ƒ `!important` è§„åˆ™æ—¶ï¼Œè¶Šæ˜¯çº§è”é åçš„ï¼ˆæ’åºè¾ƒåçš„ `@layer` ï¼Œä¼˜å…ˆçº§è¶Šä½çš„è§„åˆ™ï¼‰ï¼Œä¼˜å…ˆçº§è¶Šé«˜ï¼›

