## SSR 和 CSR 的 区别

SSR（Server-Side Rendering，服务器端渲染）和 CSR（Client-Side Rendering，客户端渲染）是两种不同的 Web 渲染方式，它们分别在服务器和客户端处理页面渲染的过程。它们的主要区别在于渲染逻辑的执行位置（服务器还是客户端），以及它们对页面加载速度、SEO、用户体验等方面的影响。

### 1. **渲染过程**

- **SSR（服务器端渲染）**：
  - 页面在服务器端渲染并生成完整的 HTML 页面，服务器将渲染后的 HTML 发送到浏览器，浏览器直接显示内容。
  - 服务器渲染的内容是一个完整的页面，客户端浏览器只负责显示和交互。
  - 例如，使用 **Vue SSR** 或 **Next.js**（React）等框架。
- **CSR（客户端渲染）**：
  - 初次请求时，浏览器加载一个空的 HTML 页面和 JavaScript 代码，JavaScript 会在浏览器端执行，利用 JavaScript 来渲染页面内容（通常通过框架如 React、Vue 等）。
  - 浏览器从服务器加载的是一个静态的 HTML 模板，之后 JavaScript 会接管页面渲染。
  - 初始渲染时，页面通常是一个空白页，等到 JavaScript 加载和渲染完成后，页面才显示内容。

### 2. **首屏渲染时间（Page Load Time）**

- **SSR**：由于服务器已经渲染了完整的 HTML 页面，浏览器可以在接收到页面后直接显示内容，因此首屏加载时间通常更短，用户能更快看到页面。
- **CSR**：浏览器需要加载 JavaScript 文件并在客户端进行渲染，首次加载时间相对较长，用户会先看到一个空白页，直到 JavaScript 渲染完成后才显示内容。

### 3. **SEO（搜索引擎优化）**

- **SSR**：由于服务器返回的是完整的 HTML 页面，搜索引擎爬虫可以直接抓取页面的内容，因此 SSR 对 SEO 非常友好，有利于搜索引擎索引和排名。
- **CSR**：由于搜索引擎爬虫通常只抓取初始的 HTML 代码，而 JavaScript 渲染的内容需要客户端执行，很多搜索引擎（如 Google）已支持客户端渲染，但仍有一定的兼容性问题，SEO 支持相对较差。

### 4. **用户体验**

- **SSR**：SSR 由于页面内容在服务器端渲染完成后直接返回，首屏渲染速度快，用户能够更快看到内容，因此用户体验更好，特别是在慢网络环境下。
- **CSR**：CSR 初次加载时，用户需要等待 JavaScript 加载和渲染，可能会体验到空白页或延迟加载的现象，虽然后续的页面切换会很快，但首次渲染的时间较长。

### 5. **交互性（动态更新）**

- **SSR**：由于是服务器渲染的 HTML 页面，用户与页面的交互需要通过额外的请求与服务器进行数据交换。每次用户与页面交互（如点击按钮或表单提交）时，通常需要重新加载和渲染页面。
- **CSR**：CSR 的页面一旦加载完毕，所有交互都是通过 JavaScript 在客户端处理的，不需要每次请求都刷新整个页面，因此页面可以更快地响应用户交互，提供更流畅的用户体验。

### 6. **服务器负载**

- **SSR**：每次用户请求页面时，服务器需要处理渲染的逻辑，生成 HTML，负载较大。尤其是在访问量很大的情况下，服务器性能要求较高。
- **CSR**：页面的渲染和大部分逻辑处理都在客户端完成，服务器的负担较轻，服务器只需要提供静态的 HTML 和数据接口。

### 7. **开发复杂度**

- **SSR**：实现 SSR 比 CSR 要复杂一些，因为需要处理服务器端渲染、状态同步、路由等问题，开发者需要对服务器端技术有一定了解。
- **CSR**：实现相对简单，尤其是使用现代前端框架（如 React、Vue、Angular）时，CSR 的开发模式和工具链成熟，开发速度较快。

### 8. **数据预取**

- **SSR**：SSR 可以在服务器渲染页面之前获取数据，并直接将数据渲染到 HTML 页面中，用户看到的页面已经是渲染好的内容。
- **CSR**：CSR 需要通过异步请求（如 AJAX 或 Fetch API）来获取数据，在渲染时填充数据。第一次加载时，通常需要等待数据加载完毕，才能进行渲染。

### 总结

- **SSR**：
  - 优点：更快的首屏渲染、良好的 SEO 支持、更适合内容驱动的应用。
  - 缺点：服务器负担重、开发复杂度高、动态交互不如 CSR 流畅。
- **CSR**：
  - 优点：减少服务器负担、页面交互更流畅、开发更加简便。
  - 缺点：首屏渲染较慢、SEO 支持较弱（不过现在的搜索引擎已逐渐支持 JavaScript 渲染）。

### 使用场景

- **SSR** 适用于 SEO 要求较高、页面内容需要快速显示的应用，如博客、新闻网站、营销页面等。
- **CSR** 适用于交互性要求高、页面更新较为频繁的应用，如单页应用（SPA）、社交网络、即时通讯等。

## windows.onload

`window.onload` 是一个在网页完全加载并且所有元素（包括图片、脚本、样式表等）都加载完成后才会触发的事件。

+ 执行初始化操作；
+ 确保 DOM 元素可操作；
+ 延迟执行某些任务；

**注意事项**

+ `window.onload` **只能绑定一个函数**，需要绑定多个事件处理函数，可以使用 `addEventListener` 的 `load` 事件（现代浏览器支持）；
+ `window.onload` 会在 **页面的所有资源（包括图片、音视频、iframe 等）完全加载完成后才触发**。这可能导致一些延迟，尤其是在有大量资源的页面中，`window.onload` 触发的时间较长。
+ **异步加载资源可能会影响页面加载时机**： 如果你使用 `window.onload` 来执行与页面加载相关的 JavaScript 代码（例如加载数据、图片或其他资源），需要小心异步加载的资源可能会导致 `window.onload` 触发的时机有所延迟。
+ **性能问题**： 如果 `window.onload` 内部绑定的任务过于复杂或包含大量代码，可能会导致页面加载和渲染延迟，影响用户体验。确保在 `window.onload` 中的操作不会阻塞页面的显示。

